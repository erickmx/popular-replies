(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,n){e.exports=n(29)},20:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(14),c=n.n(i),o=(n(20),n(2)),s=n.n(o),l=n(3),u=n(7),p=n(8),d=n(10),m=n(9),f=n(11),h=n(4),v=n(5),x=(n(27),function(e){var t=e.me2,n=e.url,r=e.wid,i=e.text,c=e.onClick,o=e.replies,s=e.maxValue,l=e.rootIndex,u=e.subIndent,p=void 0===u?0:u;return a.a.createElement("li",{className:"list-item__container",style:{marginLeft:"".concat(10*p,"px")},key:r,onClick:function(){return c(l,r)}},a.a.createElement("div",{className:"list-item__user"},a.a.createElement(h.a,{icon:v.e})," ",t),a.a.createElement("div",{className:"list-item__text"},i," ",a.a.createElement("a",{href:n},a.a.createElement(h.a,{icon:v.b}))),a.a.createElement("div",{style:{display:"flex",flexDirection:"row",flex:1,marginLeft:"5px",marginBottom:"5px"}},a.a.createElement("div",{className:"padding-5"},a.a.createElement(h.a,{icon:v.d}),o),r&&a.a.createElement("div",{className:"padding-5",style:{marginLeft:"10px"}},a.a.createElement(h.a,{icon:v.a})," ",r),a.a.createElement("div",{className:"padding-5"},a.a.createElement(h.a,{style:{color:"#d30000",marginLeft:"10px"},icon:v.c})," ",s)))});x.defaultProps={rootIndex:null,subIndent:0,maxValue:0,replies:0,wid:null};var w=x,k=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,n=e.replies,r=e.indent,i=e.rootIndex,c=e.handleClickReplies;return a.a.createElement("div",null,n.map(function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(w,{key:e.data.wid,me2:e.data.me2,text:e.data.text,replies:e.data.replies,url:e.data.url,wid:e.data.wid,rootIndex:i,onClick:c,subIndent:r,maxValue:e.maxValue||e.data.replies}),e.sons.length>0&&a.a.createElement(t,{indent:r+1,replies:e.sons,rootIndex:i,handleClickReplies:c}))}))}}]),t}(r.Component),E="https://3p8v5rmr93.execute-api.us-west-2.amazonaws.com/default/popular-replies",b=function(){var e=Object(l.a)(s.a.mark(function e(){var t,n,r,a=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{from:0,limit:200},e.prev=1,e.next=4,fetch("".concat(E,"?limit=").concat(t.limit),{method:"GET",crossDomain:!0,mode:"cors",cache:"no-cache"});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Error requesting popular whispers from the server");case 7:return e.next=9,n.json();case 9:return r=e.sent,e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(l.a)(s.a.mark(function e(){var t,n,r,a=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{wid:"",from:0,limit:200},e.prev=1,e.next=4,fetch("".concat(E,"?limit=").concat(t.limit,"&wid=").concat(t.wid),{method:"GET",crossDomain:!0,mode:"cors",cache:"no-cache"});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error("Error requesting whisper's replies from the server");case 7:return e.next=9,n.json();case 9:return r=e.sent,e.abrupt("return",r);case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(){return e.apply(this,arguments)}}(),y=function(e){return{data:{me2:e.me2,replies:e.replies,text:e.text,url:e.url,wid:e.wid},maxValue:0,sons:[]}},C=function(e){return 0===e.sons.length},P=function e(t){if(C(t))return t.data.replies;for(var n=t.sons.length,r=0,a=0,i=0;i<n;i++)r=e(t.sons[i]),a=Math.max(a,r+t.data.replies);return j(t,a),a},O=function e(t,n,r){if(C(t)&&t.data.wid!==n)return null;if(t.data.wid===n)return r(t),t;for(var a=t.sons.length,i=0;i<a;i++){if(e(t.sons[i],n,r))break}},j=function(e,t){e.maxValue=t},I=(n(28),function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(a)))).state={listPopulars:[]},n.handleClickPopulars=function(){var e=Object(l.a)(s.a.mark(function e(t){var r,a,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n.state.listPopulars,!C(r[t])){e.next=7;break}return e.next=5,g({limit:10,wid:r[t].data.wid});case 5:i=e.sent,a=i.replies.map(y);case 7:r[t].sons=a,P(r[t]),n.setState({listPopulars:r}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("HANDLE_CLICK_APP",e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}(),n.handleClickReplies=function(){var e=Object(l.a)(s.a.mark(function e(t,r){var a,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{a=n.state.listPopulars,i=a[t],n.findNodeAsync(i,r).then(function(){var e=Object(l.a)(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.insertReplies(t);case 2:P(i),n.setState({listPopulars:a});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}catch(c){console.error("HANDLE_CLICK_REPLIES",c)}case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.findNodeAsync=function(e,t){return new Promise(function(n,r){O(e,t,n)})},n.insertReplies=function(){var e=Object(l.a)(s.a.mark(function e(t){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!C(t)){e.next=7;break}return e.next=4,g({wid:t.data.wid,limit:10});case 4:n=e.sent,r=n.replies.map(y),t.sons=r;case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("INSERT_REPLIES",e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),n.handleClick=function(e,t){return t?n.handleClickPopulars(e,t):n.handleClickPopulars(e)},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;b({limit:10}).then(function(t){var n=t.popular.map(y);e.setState({listPopulars:n})}).catch(function(e){console.error("COMPONENT_DID_MOUNT_APP",e)})}},{key:"render",value:function(){var e=this,t=this.state.listPopulars;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",{style:{fontSize:"1.5rem",color:"#3e3e3e",marginLeft:"5%"}},"Popular Replies"),a.a.createElement("ul",null,t.map(function(t,n){return a.a.createElement(a.a.Fragment,null,a.a.createElement(w,{key:t.data.wid,me2:t.data.me2,replies:t.data.replies,text:t.data.text,url:t.data.url,onClick:e.handleClickPopulars,rootIndex:n,maxValue:t.maxValue||t.data.replies}),t.sons.length>0&&a.a.createElement(k,{indent:1,replies:t.sons,rootIndex:n,handleClickReplies:e.handleClickReplies}))})))}}]),t}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.0c01dd11.chunk.js.map